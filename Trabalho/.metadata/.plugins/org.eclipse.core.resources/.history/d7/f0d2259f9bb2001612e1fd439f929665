package Others;

import java.awt.*;
import java.awt.event.*;

import Model.InformacoesGlobais;
import Model.Jogador;
import View.ArmaView;
import View.Mapa;

public class TratadorMouse implements MouseListener
{
	private Component c;
	
	public TratadorMouse (Component x)
	{
		c = x;
	}
	
	public void mousePressed (MouseEvent e) {}
	public void mouseReleased (MouseEvent e) {}
	public void mouseEntered (MouseEvent e) {}
	public void mouseExited (MouseEvent e) {}
	public void mouseClicked (MouseEvent e)
	{
		if (c.getName () == "cv" || c.getName ().contains ("sv"))
		{
			ArmaView a = (ArmaView) c;
			if (a.estaDisponivel () && !a.estaEmTransicao () && a.clicouNaArma (e.getX (), e.getY ()))
			{	
				a.setEmTransicao ();
				InformacoesGlobais inf = InformacoesGlobais.getInformacoesGlobais();
				Jogador j1 = inf.getJogador(1);
				j1.atualizaArmasPosicionadas (0, true);
				j1.atualizaArmasPosicionadas (1, true);
				j1.atualizaArmasPosicionadas (2, true);
				j1.atualizaArmasPosicionadas (3, true);
				j1.atualizaArmasPosicionadas (4, true);
				j1.atualizaArmasPosicionadas (5, true);
				j1.atualizaArmasPosicionadas (6, true);
				j1.atualizaArmasPosicionadas (7, true);
				j1.atualizaArmasPosicionadas (8, true);
				j1.atualizaArmasPosicionadas (9, true);
				j1.atualizaArmasPosicionadas (10, true);
				j1.atualizaArmasPosicionadas (11, true);
				j1.atualizaArmasPosicionadas (12, true);
				j1.atualizaArmasPosicionadas (13, true);
				j1.atualizaArmasPosicionadas (14, true);
				
				System.out.println (InformacoesGlobais.getInformacoesGlobais ().getJogador (1).getNome ());
			}
		}
		else if (c.getName ().contains ("mapa"))
		{
			InformacoesGlobais inf = InformacoesGlobais.getInformacoesGlobais ();
			Jogador jog;
			
			if (c.getName ().contains ("1"))
				jog = inf.getJogador (1);
			else
				jog = inf.getJogador (2);
			
			Mapa m = (Mapa) c;
			Point p = m.getPosicaoNoMapa(e.getX(), e.getY());
			jog.marcarMeuTabuleiro(p.x, p.y);
			m.pintaRetanguloNaPosicao(p, Color.red);
			System.out.println ("Posicao do mouse: (" + e.getX () + "," + e.getY () + ")");
		}
	}
}